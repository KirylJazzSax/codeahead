(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{111:function(e,t,a){},112:function(e,t,a){},238:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),i=a(20),o=a.n(i),r=(a(111),a(112),a(6)),c=a(8),d=a(14),l=a(10),u=a(11),h=a(245),b=a(242),j=a(243),p=a(244),m=a(97),k=a.n(m).a.create({baseURL:"http://192.168.0.24:8000/api/"}),f=function(){return window.userData},O=function(e){return k.post("signup",{name:e.name,email:e.email,password:e.password})},x=function(){return window.userData&&window.userData.token},v=function(e){window.userData=e.data},g=function(){return window.userData?window.userData.token:null},S=a(19),T=a.n(S),w=a(26),y=a(103),C=a(246),L=a(240),E=a(33),M=function e(t,a,s){Object(r.a)(this,e),this.name=t,this.email=a,this.password=s},I=a(16),q=a(15),N=a(1),R=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).state={requestSend:!1},s.handleSubmit=s.handleSubmit.bind(Object(d.a)(s)),s}return Object(c.a)(a,[{key:"handleSubmit",value:function(){var e=Object(w.a)(T.a.mark((function e(t){var a,s;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new M(t.name,t.email,t.password),this.setState({requestSend:!0}),e.prev=2,e.next=5,O(a);case 5:s=e.sent,this.props.handleUserRegistered(s),this.setState({requestSend:!1}),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0),q.b.error("Registration error :("),this.setState({requestSend:!1});case 15:case"end":return e.stop()}}),e,this,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=I.a().shape({name:I.b().min(1,"Required").required(),email:I.b().email().required("Required"),password:I.b().min(1,"Required").required("Required")});return Object(N.jsxs)(y.a,{className:"py-2",children:[Object(N.jsx)("h3",{className:"p-2",children:"Register"}),Object(N.jsx)(E.a,{validationSchema:t,onSubmit:this.handleSubmit,initialValues:{name:"",email:"",password:""},children:function(t){var a=t.handleSubmit,s=t.handleChange,n=(t.handleBlur,t.values),i=t.touched,o=(t.isValid,t.errors);return Object(N.jsxs)(C.a,{noValidate:!0,onSubmit:a,children:[Object(N.jsxs)(C.a.Group,{controlId:"validationName",children:[Object(N.jsx)(C.a.Label,{children:"Name"}),Object(N.jsx)(C.a.Control,{type:"text",name:"name",value:n.name,onChange:s,isValid:i.name&&!o.name}),Object(N.jsx)(C.a.Control.Feedback,{children:"Looks good!"})]}),Object(N.jsxs)(C.a.Group,{controlId:"validationEmail",children:[Object(N.jsx)(C.a.Label,{children:"Email"}),Object(N.jsx)(C.a.Control,{type:"email",name:"email",value:n.email,onChange:s,isValid:i.email&&!o.email}),Object(N.jsx)(C.a.Control.Feedback,{children:"Looks good!"})]}),Object(N.jsxs)(C.a.Group,{controlId:"validationPassword",children:[Object(N.jsx)(C.a.Label,{children:"Password"}),Object(N.jsx)(C.a.Control,{type:"password",name:"password",value:n.password,onChange:s,isValid:i.password&&!o.password}),Object(N.jsx)(C.a.Control.Feedback,{children:"Looks good!"})]}),Object(N.jsx)(L.a,{disabled:e.state.requestSend,type:"submit",children:"Submit form"})]})}})]})}}]),a}(n.a.Component),D=a(13),F=function(e){return k.post("task",e,{headers:{Authorization:"Bearer ".concat(g())}})},A=function(e){return k.delete("task/".concat(e.id))},V=a(104),_=new(a.n(V).a)("fdb0a54745c072fc5ff1",{cluster:"eu"}),U=a(241),G=a(105),P=a.n(G),B=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).state={requestSend:!1},s.handleSubmit=s.handleSubmit.bind(Object(d.a)(s)),s}return Object(c.a)(a,[{key:"handleSubmit",value:function(){var e=Object(w.a)(T.a.mark((function e(t){var a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({requestSend:!0}),e.prev=1,!this.props.taskToEdit||!this.props.taskToEdit.hasOwnProperty("id")){e.next=11;break}return t.id=this.props.taskToEdit.id,this.props.handleEditTask(),e.next=7,s=t,k.patch("task/".concat(s.id),s);case 7:a=e.sent,this.props.handleEditTaskAsync(a.data),e.next=13;break;case 11:a=F(t),this.props.handleCreateTask();case 13:this.setState({requestSend:!1}),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(1),console.log(e.t0),q.b.error("Error :("),this.setState({requestSend:!1});case 21:case"end":return e.stop()}var s}),e,this,[[1,16]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=I.a().shape({title:I.b().min(1,"Required").required(),text:I.b().min(1,"Required").required(),notification_date:I.b(),notification_time:I.b()});return Object(N.jsxs)(y.a,{className:"py-2",children:[Object(N.jsx)("h3",{className:"p-2",children:this.state.taskToEdit?"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"}),Object(N.jsx)(E.a,{validationSchema:t,onSubmit:this.handleSubmit,initialValues:{title:this.props.taskToEdit?this.props.taskToEdit.title:"",text:this.props.taskToEdit?this.props.taskToEdit.text:"",notification_date:this.props.taskToEdit?this.props.taskToEdit.notification_date:"",notification_time:this.props.taskToEdit?this.props.taskToEdit.notification_time:""},children:function(t){var a=t.handleSubmit,s=t.handleChange,n=(t.handleBlur,t.values),i=t.touched,o=(t.isValid,t.errors);return Object(N.jsxs)(C.a,{noValidate:!0,onSubmit:a,children:[Object(N.jsxs)(C.a.Group,{controlId:"validationTitle",children:[Object(N.jsx)(C.a.Label,{children:"Title"}),Object(N.jsx)(C.a.Control,{type:"text",name:"title",value:n.title,onChange:s,isValid:i.title&&!o.title}),Object(N.jsx)(C.a.Control.Feedback,{children:"Looks good!"})]}),Object(N.jsxs)(C.a.Group,{controlId:"validationText",children:[Object(N.jsx)(C.a.Label,{children:"Text"}),Object(N.jsx)(C.a.Control,{type:"text",name:"text",value:n.text,onChange:s,isValid:i.text&&!o.text}),Object(N.jsx)(C.a.Control.Feedback,{children:"Looks good!"})]}),Object(N.jsxs)(C.a.Group,{controlId:"validationDate",children:[Object(N.jsx)(C.a.Label,{children:"Date"}),Object(N.jsx)(C.a.Control,{disabled:e.props.taskToEdit,type:"date",name:"notification_date",value:n.notification_date,onChange:s,isValid:i.notification_date&&!o.notification_date}),Object(N.jsx)(C.a.Control.Feedback,{children:"Looks good!"})]}),Object(N.jsxs)(C.a.Group,{controlId:"validationTime",children:[Object(N.jsx)(C.a.Label,{children:"Time"}),Object(N.jsx)(C.a.Control,{disabled:e.props.taskToEdit,type:"time",name:"notification_time",value:n.notification_time,onChange:s,isValid:i.notification_time&&!o.notification_time}),Object(N.jsx)(C.a.Control.Feedback,{children:"Looks good!"})]}),Object(N.jsx)(L.a,{disabled:e.state.requestSend,type:"submit",children:"Submit form"})]})}})]})}}]),a}(n.a.Component),H=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).state={tasks:[],showTaskModal:!1,taskToEdit:null,disabledTaskIds:[]},s.closeModal=s.closeModal.bind(Object(d.a)(s)),s}return Object(c.a)(a,[{key:"initPusherSubscriptions",value:function(){var e=this;_.subscribe("tasks").bind("App\\Events\\TaskCompletedEvent",(function(t){e.replaceTaskAndNotify(t,"Task ".concat(t.id," completed"))})).bind("App\\Events\\TaskCreatedEvent",(function(t){e.pushTaskAndNotify(t)})).bind("App\\Events\\TaskDeleteEvent",(function(t){e.removeTaskFromStateAndNotify(t)})).bind("App\\Events\\TaskUpdateEvent",(function(t){e.replaceTaskAndNotify(t,"Task ".concat(t.id," updated"))}))}},{key:"componentDidMount",value:function(){var e=this;this.initPusherSubscriptions(),k.get("tasks").then((function(t){e.setState({tasks:t.data})}))}},{key:"notificationTime",value:function(e){return P()(e.notification_date+" "+e.notification_time).format("lll")}},{key:"closeModal",value:function(){this.setState({showTaskModal:!1})}},{key:"pushTaskAndNotify",value:function(e){var t=Object(D.a)(this.state.tasks);t.find((function(t){return t.id===e.id}))||(this.setState({tasks:[].concat(Object(D.a)(t),[e])}),q.b.success("".concat(this.notificationTime(e)," - ").concat(e.title," - ").concat(e.user.name)))}},{key:"replaceTaskAndNotify",value:function(e,t){var a=Object(D.a)(this.state.tasks),s=a.findIndex((function(t){return t.id===e.id}));-1!==s&&(x()&&function(e){k.post("task-seen",{task_id:e.id},{headers:{Authorization:"Bearer ".concat(g())}})}(e),a.splice(s,1,e),this.setState({tasks:a}),q.b.success(t))}},{key:"removeTaskFromStateAndNotify",value:function(e){var t=Object(D.a)(this.state.tasks),a=t.findIndex((function(t){return t.id===e.id}));-1!==a&&(t.splice(a,1),this.setState({tasks:t}),q.b.success("Deleted"))}},{key:"deleteTask",value:function(){var e=Object(w.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A(t);case 3:e.sent,e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0),q.b.error("Delete error");case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()},{key:"removeFromDisabledIds",value:function(e){var t=Object(D.a)(this.state.disabledTaskIds),a=t.findIndex((function(t){return e===t}));-1!==a&&(t.splice(a,1),this.setState({disabledTaskIds:t}))}},{key:"handleEditTask",value:function(){this.closeModal()}},{key:"handleEditTaskAsync",value:function(e){this.removeFromDisabledIds(e.id)}},{key:"handleCreateTask",value:function(){this.closeModal()}},{key:"notLoggedToast",value:function(){q.b.dark("For edit or create please login")}},{key:"render",value:function(){var e=this,t=this.state.tasks.map((function(t){return Object(N.jsxs)("tr",{children:[Object(N.jsx)("td",{children:t.id}),Object(N.jsx)("td",{children:t.title}),Object(N.jsx)("td",{children:t.text}),Object(N.jsx)("td",{children:e.notificationTime(t)}),Object(N.jsx)("td",{children:t.user.name}),Object(N.jsx)("td",{children:1==t.completed?"Yes":"No"}),Object(N.jsxs)("td",{children:[Object(N.jsx)(L.a,{disabled:1==t.completed||e.state.disabledTaskIds.find((function(e){return e===t.id})),variant:"info",className:"mr-1",onClick:function(){e.setState({taskToEdit:t}),e.setState({disabledTaskIds:[].concat(Object(D.a)(e.state.disabledTaskIds),[t.id])}),e.setState({showTaskModal:!0})},children:"Edit"}),Object(N.jsx)(L.a,{disabled:1==t.completed||e.state.disabledTaskIds.find((function(e){return e===t.id})),variant:"danger",onClick:function(){e.setState({disabledTaskIds:[].concat(Object(D.a)(e.state.disabledTaskIds),[t.id])}),e.deleteTask(t)},children:"Delete"})]})]},t.id)}));return Object(N.jsxs)(y.a,{children:[Object(N.jsx)(L.a,{variant:"primary",className:"mb-2",onClick:function(){x()?e.setState({showTaskModal:!0}):e.notLoggedToast()},children:"Create"}),Object(N.jsxs)(U.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(N.jsx)("thead",{children:Object(N.jsxs)("tr",{children:[Object(N.jsx)("th",{children:"Id"}),Object(N.jsx)("th",{children:"Title"}),Object(N.jsx)("th",{children:"Text"}),Object(N.jsx)("th",{children:"Notification time"}),Object(N.jsx)("th",{children:"User name"}),Object(N.jsx)("th",{children:"Completed"}),Object(N.jsx)("th",{children:"Actions"})]})}),Object(N.jsx)("tbody",{children:t})]}),Object(N.jsx)(p.a,{show:this.state.showTaskModal,onHide:function(){e.removeFromDisabledIds(e.state.disabledTaskIds[e.state.disabledTaskIds.length-1]),e.closeModal()},children:Object(N.jsx)(B,{taskToEdit:this.state.taskToEdit,handleCreateTask:function(){return e.handleCreateTask()},handleEditTaskAsync:function(t){return e.handleEditTaskAsync(t)},handleEditTask:function(){return e.handleEditTask()}})})]})}}]),a}(n.a.Component),z=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).state={requestSend:!1},s.handleSubmit=s.handleSubmit.bind(Object(d.a)(s)),s}return Object(c.a)(a,[{key:"handleSubmit",value:function(){var e=Object(w.a)(T.a.mark((function e(t){var a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({requestSend:!0}),e.prev=1,e.next=4,s=t.email,n=t.password,k.post("login",{email:s,password:n});case 4:a=e.sent,this.props.handleUserLogged(a),this.setState({requestSend:!1}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),q.b.error("Login error :("),this.setState({requestSend:!1});case 13:case"end":return e.stop()}var s,n}),e,this,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=I.a().shape({email:I.b().email().required("Required"),password:I.b().min(1,"Required").required("Required")});return Object(N.jsxs)(y.a,{className:"py-2",children:[Object(N.jsx)("h3",{className:"p-2",children:"Login"}),Object(N.jsx)(E.a,{validationSchema:t,onSubmit:this.handleSubmit,initialValues:{email:"",password:""},children:function(t){var a=t.handleSubmit,s=t.handleChange,n=(t.handleBlur,t.values),i=t.touched,o=(t.isValid,t.errors);return Object(N.jsxs)(C.a,{noValidate:!0,onSubmit:a,children:[Object(N.jsxs)(C.a.Group,{controlId:"validationEmail",children:[Object(N.jsx)(C.a.Label,{children:"Email"}),Object(N.jsx)(C.a.Control,{type:"email",name:"email",value:n.email,onChange:s,isValid:i.email&&!o.email}),Object(N.jsx)(C.a.Control.Feedback,{children:"Looks good!"})]}),Object(N.jsxs)(C.a.Group,{controlId:"validationPassword",children:[Object(N.jsx)(C.a.Label,{children:"Password"}),Object(N.jsx)(C.a.Control,{type:"password",name:"password",value:n.password,onChange:s,isValid:i.password&&!o.password}),Object(N.jsx)(C.a.Control.Feedback,{children:"Looks good!"})]}),Object(N.jsx)(L.a,{disabled:e.state.requestSend,type:"submit",children:"Submit form"})]})}})]})}}]),a}(n.a.Component);function J(e){return Object(N.jsxs)(h.a,{className:"justify-content-center mb-3",onSelect:function(t){return e.onClick(t)},children:[Object(N.jsx)(h.a.Item,{children:Object(N.jsx)(h.a.Link,{eventKey:"register",children:"Register"})}),Object(N.jsx)(h.a.Item,{children:Object(N.jsx)(h.a.Link,{eventKey:"login",children:"Link"})})]})}function K(e){return Object(N.jsx)(h.a,{className:"justify-content-center mb-3",children:Object(N.jsx)(h.a.Item,{children:Object(N.jsxs)(h.a.Link,{disabled:!0,children:["Hi ",e.name]})})})}var Y=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).openModal=s.openModal.bind(Object(d.a)(s)),s.closeLoginModal=s.closeLoginModal.bind(Object(d.a)(s)),s.closeRegisterModal=s.closeRegisterModal.bind(Object(d.a)(s)),s.state={showRegisterModal:!1,showLoginModal:!1,isLogged:!1,userData:null,userName:""},s}return Object(c.a)(a,[{key:"openModal",value:function(e){"register"===e&&this.setState({showRegisterModal:!0,showLoginModal:!1}),"login"===e&&this.setState({showRegisterModal:!1,showLoginModal:!0})}},{key:"handleUserRegistered",value:function(e){v(e),this.closeRegisterModal(),this.setState({isLogged:x()}),q.b.success("Thank you for registration"),this.setState({userName:f().name})}},{key:"handleUserLogged",value:function(e){v(e),this.closeLoginModal(),this.setState({isLogged:x()}),q.b.success("You logged in"),this.setState({userName:f().name})}},{key:"closeRegisterModal",value:function(){this.setState({showRegisterModal:!1})}},{key:"closeLoginModal",value:function(){this.setState({showLoginModal:!1})}},{key:"componentDidMount",value:function(){x()&&(this.setState({userName:f().name}),this.setState({isLogged:x()}))}},{key:"render",value:function(){var e,t=this,a=this.state.isLogged,s=this.state.userName;return e=a?Object(N.jsx)(K,{name:s}):Object(N.jsx)(J,{onClick:this.openModal}),Object(N.jsxs)(b.a,{fluid:!0,className:"px-5",children:[e,Object(N.jsx)(j.a,{children:Object(N.jsx)(H,{})}),Object(N.jsx)(p.a,{show:this.state.showRegisterModal,onHide:this.closeRegisterModal,children:Object(N.jsx)(R,{handleUserRegistered:function(e){t.handleUserRegistered(e)}})}),Object(N.jsx)(p.a,{show:this.state.showLoginModal,onHide:this.closeLoginModal,children:Object(N.jsx)(z,{handleUserLogged:function(e){t.handleUserLogged(e)}})}),Object(N.jsx)(q.a,{})]})}}]),a}(n.a.Component);a(236),a(237);var Q=function(){return Object(N.jsx)(Y,{})},W=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,247)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,i=t.getLCP,o=t.getTTFB;a(e),s(e),n(e),i(e),o(e)}))};o.a.render(Object(N.jsx)(Q,{}),document.getElementById("root")),W()}},[[238,1,2]]]);
//# sourceMappingURL=main.e580fc72.chunk.js.map